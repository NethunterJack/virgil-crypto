config_file:
    uncomment_macros :
        - POLARSSL_HAVE_LONGLONG
        - POLARSSL_HAVE_TIME
        - POLARSSL_HAVEGE_C
        - POLARSSL_ECDSA_C
        - POLARSSL_DES_C
        - POLARSSL_PKCS12_C
    comment_macros :
        - POLARSSL_HAVE_ASM
        - POLARSSL_HAVE_IPV6
        - POLARSSL_CIPHER_MODE_CFB
        - POLARSSL_CIPHER_MODE_CTR
        - POLARSSL_KEY_EXCHANGE_PSK_ENABLED
        - POLARSSL_KEY_EXCHANGE_DHE_PSK_ENABLED
        - POLARSSL_KEY_EXCHANGE_ECDHE_PSK_ENABLED
        - POLARSSL_KEY_EXCHANGE_RSA_PSK_ENABLED
        - POLARSSL_KEY_EXCHANGE_RSA_ENABLED
        - POLARSSL_KEY_EXCHANGE_DHE_RSA_ENABLED
        - POLARSSL_KEY_EXCHANGE_ECDHE_RSA_ENABLED
        - POLARSSL_KEY_EXCHANGE_ECDHE_ECDSA_ENABLED
        - POLARSSL_KEY_EXCHANGE_ECDH_ECDSA_ENABLED
        - POLARSSL_KEY_EXCHANGE_ECDH_RSA_ENABLED
        - POLARSSL_PK_PARSE_EC_EXTENDED
        - POLARSSL_ERROR_STRERROR_BC
        - POLARSSL_FS_IO
        - POLARSSL_PKCS1_V21
        - POLARSSL_SELF_TEST
        - POLARSSL_SSL_SRV_SUPPORT_SSLV2_CLIENT_HELLO
        - POLARSSL_SSL_MAX_FRAGMENT_LENGTH
        - POLARSSL_SSL_PROTO_SSL3
        - POLARSSL_SSL_PROTO_TLS1
        - POLARSSL_SSL_PROTO_TLS1_1
        - POLARSSL_SSL_PROTO_TLS1_2
        - POLARSSL_SSL_SESSION_TICKETS
        - POLARSSL_SSL_SERVER_NAME_INDICATION
        - POLARSSL_SSL_TRUNCATED_HMAC
        - POLARSSL_SSL_ALERT_MESSAGES
        - POLARSSL_AESNI_C
        - POLARSSL_ARC4_C
        - POLARSSL_BLOWFISH_C
        - POLARSSL_CAMELLIA_C
        - POLARSSL_CERTS_C
        - POLARSSL_DEBUG_C
        - POLARSSL_DHM_C
        - POLARSSL_GCM_C
        - POLARSSL_NET_C
        - POLARSSL_PADLOCK_C
        - POLARSSL_PLATFORM_C
        - POLARSSL_RIPEMD160_C
        - POLARSSL_SSL_CACHE_C
        - POLARSSL_SSL_CLI_C
        - POLARSSL_SSL_SRV_C
        - POLARSSL_SSL_TLS_C
        - POLARSSL_XTEA_C
        - POLARSSL_X509_CRT_PARSE_C
        - POLARSSL_X509_CRL_PARSE_C
        - POLARSSL_X509_CSR_PARSE_C
        - POLARSSL_X509_CREATE_C
        - POLARSSL_X509_CRT_WRITE_C
        - POLARSSL_X509_CSR_WRITE_C
        - POLARSSL_X509_RSASSA_PSS_SUPPORT
    add_new_macros_after_regex : '^[\s]*(#define[\s]+POLARSSL_ECP_C)'
    new_macros :
        - '#define POLARSSL_ECIES_C'
        - '#define POLARSSL_PK_WRITE_ENCRYPTED_KEY'
    add_check_macros_after_regex : '^[\s]*(#define[\s]+POLARSSL_CHECK_CONFIG_H)'
    check_macros :
        - '#if defined(POLARSSL_PK_WRITE_ENCRYPTED_KEY) &&    \'
        - '    ( !defined(POLARSSL_DES_C) ||                  \'
        - '      !defined(POLARSSL_PKCS12_C) ||               \'
        - '      !defined(POLARSSL_SHA1_C) )'
        - '#error "POLARSSL_PK_WRITE_ENCRYPTED_KEY defined, but not all prerequisites"'
        - '#endif'

library_new_headers:
    - kdf1.h
    - ecies.h
library_new_sources:
    - kdf1.c
    - ecies.c
library_patch_sources:
library_makefile_objects:
    add_after_regex : '^OBJS=.*$'
    additional_endline_delimeter : '\'
    objects :
        - kdf1.o
        - ecies.o
library_cmakelists_objects:
    add_after_regex : '^set\(src.*$'
    additional_endline_delimeter : ''
    objects :
        - kdf1.c
        - ecies.c
library_svn_patch_files:
    - oid.h.patch
    - oid.c.patch
    - pk.h.patch
    - pkwrite.c.patch
    - pk_wrap.c.patch
    - asn1write.c.patch
    - error.c.patch
